<!DOCTYPE html>
<html>
<head>
  <title>Bounding Box Capture</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css">
  
  <!-- Leaflet CSS (no integrity to avoid SRI errors) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    crossorigin=""
  />
  
  <!-- Leaflet.draw CSS (no integrity) -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"
  />
</head>
<body>
  <button id="captureBtn">Capture Bounding Box</button>
  <button id="polygonBtn"><i class="fas fa-draw-polygon"></i></button>
  <button id="deleteBtn"><i class="fas fa-trash"></i></button>
  <button id="helpBtn" class="help-btn"><i class="fas fa-question-circle"></i></button>
  <div class="grid-control">
    <label for="gridSize">Grid Size (degrees):</label>
    <div class="grid-input-container">
        <input type="range" id="gridSize" min="0.01" max="1" step="0.01" value="1">
        <input type="number" id="gridSizeManual" min="0.01" max="1" step="0.01" value="1">
    </div>
    <div id="gridWarning" class="grid-warning">
        Draw a polygon to see box count
    </div>
  </div>
  <div id="map"></div>
  <div id="info"></div>
  
  <!-- Leaflet JS (no integrity) -->
  <script
    src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    crossorigin=""
  ></script>
  
  <!-- Leaflet.draw JS (no integrity) -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"
  ></script>
  
  <!-- Custom JS -->
  <script src="script.js"></script>
  
  <div id="helpModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>How to Use</h2>
      <div class="instructions">
        <h3>Drawing Tools</h3>
        <ul>
          <li><i class="fas fa-draw-polygon"></i> <strong>Draw Polygon:</strong> Click to draw a custom shape. Click points to create vertices and double-click to finish.</li>
          <li><strong>Capture Bounding Box:</strong> Click to draw a rectangular bounding box by clicking and dragging.</li>
          <li><i class="fas fa-trash"></i> <strong>Delete:</strong> Remove all drawn shapes from the map.</li>
        </ul>

        <h3>Grid Controls</h3>
        <ul>
          <li>Use the slider or input box to adjust the grid size (in degrees)</li>
          <li>The grid will automatically update when a polygon is drawn</li>
          <li>A warning will appear if the grid size would create too many boxes</li>
        </ul>

        <h3>Output</h3>
        <ul>
          <li>View coordinates in both JSON and Python formats</li>
          <li>Use the copy buttons to copy the formatted data to your clipboard</li>
          <li>For polygons, the output includes all grid boxes that intersect with the shape</li>
          <li>For bounding boxes, the output includes the four corner coordinates</li>
        </ul>
      </div>
    </div>
  </div>
</body>
</html>
